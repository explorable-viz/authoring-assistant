\section{AI-Assisted Authoring Workflow}
\label{sec:authoring-workflow}

\begin{figure}
    \centering
    \includegraphics[width=0.95\linewidth]{fig/authoring-assistant-architecture.png}
    \caption{AI-assisted authoring workflow}\label{fig:architecture}
\end{figure}

\subsection{Editor Loop}\label{subsec:editor-loop}
Design of main loop that would be integrated into an IDE. The configuration (state) that is being maintained
is a \kw{Paragraph} the user is authoring in Fluid. Consists of a sequence of text fragments, some of which
are uninterpreted (plain literals), the remainder have underlying expressions linking the text to raw or derived
data.

Workflow:
\begin{enumerate}
\item User selects (a substring of) one of the literal text fragments, indicating they want to link it in this
way
\item Authoring tool generates expression which is either:
  \begin{enumerate}
  \item computes the selected text (e.g.~``greater than'' might be computed by comparing two numbers)
  \item becomes the formal meaning of the selected text (e.g. the text ``carbon intensity of methane
emissions'' can be understood in a specific context as referring to the numerical value ``34 gCO2eq/kWh''
  \end{enumerate}
\item Some kind of validation step, including both automated validation (e.g. checking for runtime errors) and
user validation; if validation fails, goto (2)
\item Partition code into additional definitions and expression; add definitions to main source file, and
incorporate expression into \kw{Paragraph}
\item Goto (1) with updated editor state
\end{enumerate}

\subsection{Paragraph with generated expression}
Figure \ref{fig:fluid-example-paragraph} shows the fluid code of a Paragraph with fluid expression generated by the authoring assistant.
Figure \ref{fig:fluid-scigen} shows the fluid code written for the scigen datasets and examples.
\begin{figure}[h]
    \small
    {\lstinputlisting[language=Fluid]{website/authoring-assistant/fluid/1805.02474v1-10.fld}}
    \vspace{-0.5em}
    \caption{Fluid source code example Paragraph}
    \label{fig:fluid-example-paragraph}
\end{figure}

\begin{figure}[h]
    \small
    {\lstinputlisting[language=Fluid]{fluid-common/scigen.fld}}
    \vspace{-0.5em}
    \caption{Fluid library written for scigen}
    \label{fig:fluid-scigen}
\end{figure}


\subsection{Render Example}

\begin{figure}
    \centering
    \includegraphics[width=0.95\linewidth]{fig/scigen-mr-1906.02780-10.png}
    \caption{Website example with the generated expression from authoring assistant}\label{fig:scigen-example-website}
\end{figure}


\subsection{Turning validation errors into improved prompts}\label{subsec:turning-validation-errors-into-improved-prompts}
E.g.:
\begin{enumerate}
\item Turn ``Definition not found'' into prompt to generate definition?
\end{enumerate}

\subsection{IDE integration}\label{subsec:ide-integration}

Could then be integrated into desktop IDE like VSCode or online IDE like CodeMirror. Might make a good
internship project, but could also be out-of-scope for this paper.

\subsection{Other potential enhancements}\label{subsec:other-potential-enhancements}

We could also think about using an LLM in a couple of other complementary ways:
\begin{itemize}
\item identifying text fragments which might be linked;
\item validating generated expressions (perhaps by proposing test cases)
\end{itemize}


\section{Results}
\label{sec:results}

\subsection{Success Rate by Testcase}
\label{subsec:success_rate_by_test_case}

\begin{figure}[!h]
    \centering
    \includegraphics[width=0.95\linewidth]{fig/success_rate_by_test_case}
    \caption{Success rate by testcases}\label{fig:success_rate_by_test_case}
\end{figure}



